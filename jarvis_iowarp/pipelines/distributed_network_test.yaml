# IOWarp Distributed Networking Test Pipeline
# Purpose: Deploy the IOWarp runtime on two nodes to test Send/Recv networking
# Requirements:
#   - Two nodes accessible via hostfile
#   - chimaera runtime start and chimaera runtime stop in PATH
#   - Hostfile at $JARVIS_SHARED/hostfile

name: iowarp_distributed_network_test

pkgs:
  - pkg_type: jarvis_iowarp.wrp_runtime
    pkg_name: runtime_distributed

    # Use distributed hosts from hostfile
    # The hostfile should be at $JARVIS_SHARED/hostfile
    # Format: hostname IP_address (one per line)

    # Worker thread configuration
    # Using fewer workers for testing
    num_threads: 4
    process_reaper_workers: 1

    # Memory segment configuration
    # Smaller segments for testing
    main_segment_size: "auto"
    client_data_segment_size: "256M"

    # Networking configuration
    port: 9413

    # Logging - use debug for detailed networking logs
    log_level: "debug"

    # Runtime configuration
    queue_depth: 1024
    local_sched: "default"
    heartbeat_interval: 1000

    # Keep runtime alive for testing
    sleep: 300  # 5 minutes
