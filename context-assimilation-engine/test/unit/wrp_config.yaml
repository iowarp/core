# WRP Configuration Example
# Demonstrates how to configure Chimaera runtime with CTE and CAE modules
# This configuration combines runtime settings with declarative pool creation

# Memory segment configuration
memory:
  main_segment_size: auto
  client_data_segment_size: 2GB
  runtime_data_segment_size: 2GB

# Network configuration
networking:
  port: 9413
  neighborhood_size: 1

# Logging configuration
logging:
  level: info
  file: /tmp/chimaera.log

# Runtime configuration
runtime:
  num_threads: 1         # Worker threads for task execution
  queue_depth: 1024      # Task queue depth per worker
  local_sched: "default" # Local task scheduler
  heartbeat_interval: 1000

# Compose section - declarative pool creation
# Creates CTE and CAE modules with their respective configurations
compose:
  # CTE Core module with storage configuration
  # Pool ID: 512.0 (defined in wrp_cte/core/constants.h)
  # Pool name: "cte_main" (user-defined)
  - mod_name: wrp_cte_core
    pool_name: cte_main
    pool_query: local
    pool_id: "512.0"

    targets:
      neighborhood: 1  # Single-node configuration
      default_target_timeout_ms: 30000
      poll_period_ms: 5000  # Period to rescan targets for statistics (capacity, bandwidth, etc.)

    # Storage block device configuration
    # RAM-only configuration for benchmark testing
    storage:
      # Primary RAM storage
      - path: "ram::cte_ram_tier1"
        bdev_type: "ram"
        capacity_limit: "16GB"
        score: 0.0           # Manual score override (0.0-1.0) - highest tier

    # Data Placement Engine configuration
    dpe:
      dpe_type: "max_bw"  # Options: "random", "round_robin", "max_bw"


  # CAE Core module for data assimilation
  # Pool ID: 400.0 (defined in wrp_cae/core/constants.h as kCaePoolId)
  # Pool name: "cae_main" (user-defined)
  - mod_name: wrp_cae_core
    pool_name: cae_main
    pool_query: local
    pool_id: "400.0"
  